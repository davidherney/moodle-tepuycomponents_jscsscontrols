define("tepuycomponents_jscsscontrols/main",["jquery"],(function($){return{init:function(courseid){$(".banner-top").parents(".no-overflow").removeClass("no-overflow");if($(".tepuy-menucontroler").on("mouseover touchstart",(function(){var $this=$(this),$parents=$this.parents(".box_resources");if(0!=$parents.length){var $parent=$($parents[0]);$parent.find(".selected").removeClass("selected"),$parent.find("[data-rel]").hide(),$parent.find('[data-rel="'+$this.attr("data-type")+'"]').show(),$this.addClass("selected")}})),$(".tepuy-menucontroler").on("touchend",(function(){var $node=$('[data-rel="'+$(this).attr("data-type")+'"]');$("html, body").animate({scrollTop:$node.offset().top},500)})),$(".attachedimages").length>0){var $sliderimages=$('<div class="tepuy-sliderimages"></div>');$sliderimages.insertBefore($(".attachedimages")[0])}$(".attachedimages img").each((function(){var $this=$(this);$sliderimages.append($this)})),$(".tepuy-sliderimages").each((function(){var $this=$(this);console.log($this),$this.find("br").remove(),$this.find("img").first().addClass("active");var fnnextimage=function(){var $active=$this.find("img.active"),$next=$active.next("img");$active.removeClass("active"),$next.length>0?$next.addClass("active"):$this.find("img").first().addClass("active")};if($this.find("img").length>1){$this.find("img").on("click",fnnextimage);var $controlbefore=$('<div class="slide-control" data-action="before">&#60;</div>');$controlbefore.on("click",(function(){var $active=$this.find("img.active"),$next=$active.prev("img");$active.removeClass("active"),$next.length>0?$next.addClass("active"):$this.find("img").last().addClass("active")})),$this.append($controlbefore);var $controlafter=$('<div class="slide-control" data-action="after">&#62;</div>');$controlafter.on("click",fnnextimage),$this.append($controlafter)}else 0==$this.find("img").length&&$this.hide()})),$(".completiontag.complete").parents(".completion-parent").addClass("complete"),$(".completiontag.incomplete").parents(".completion-parent").addClass("incomplete"),$("[tepuy-toggle]").on("click",(function(){var $this=$(this),cssclass=$this.attr("tepuy-toggle"),target=$this.attr("tepuy-target");$(target).toggleClass(cssclass)})),$(".tepuy-accordion").each((function(){var $this=$(this);$this.find("> div").addClass("closed"),$this.find("> div > h3").each((function(){var $header=$(this),$parent=$header.parent(),$body=$parent.find("> div");$header.on("click",(function(){var opened=!1;$parent.hasClass("opened")&&(opened=!0),$this.find("> div.opened > div").hide(400),$this.find("> div.opened").removeClass("opened").addClass("closed"),opened?($parent.removeClass("opened").addClass("closed"),$body.hide(400)):($parent.removeClass("closed").addClass("opened"),$body.show(400))}))}))})),$(".tepuy-transition").on("click",(function(event){event.preventDefault();var $this=$(this),$show=$($this.attr("data-show")),$hide=$($this.attr("data-hide")),transition=$this.attr("data-transition"),duration=$this.attr("data-duration")?parseInt($this.attr("data-duration")):400;transition?$hide.hide(duration,transition,(function(){$show.show(duration,transition)})):($hide.hide(),$show.show())})),$(".tepuy-wf").each((function(){var $this=$(this);if(!($this.parents(".editor_atto_wrap").length>0)){$this.wrapInner("<div class='tepuy-body'></div>");var style="";$this.attr("data-property-width")&&(style+="width:"+$this.attr("data-property-width")+";"),$this.attr("data-property-height")&&(style+="height:"+$this.attr("data-property-height")+";");var $close=$('<div class="tepuy-close">X</div>');$close.on("click",(function(){$this.hide({effect:"slide",direction:"down"})})),""!=style&&$this.attr("style",style),$this.append($close),$this.hide()}})),$(".tepuy-wf-controller").on("click",(function(){var $this=$(this),w=$this.attr("data-property-width"),h=$this.attr("data-property-height");if(!($this.parents(".editor_atto_wrap").length>0)){var $float_window=$($this.attr("data-content"));w&&$float_window.css("width",w),h&&$float_window.css("height",h),console.log($float_window),$float_window.show({effect:"slide",direction:"down"})}})),$(".tepuy-w").each((function(){var $this=$(this);if(!($this.parents('[data-fieldtype="editor"]')&&$this.parents('[data-fieldtype="editor"]').length>0)){if($this.wrapInner("<div class='tepuy-body tepuy-body-w'></div>"),$this.attr("data-tepuy-showentry")||$this.attr("data-tepuy-showconcept")){var searchparams={};$this.attr("data-tepuy-showentry")?searchparams.eid=$this.attr("data-tepuy-showentry"):$this.attr("data-tepuy-showconcept")&&courseid&&(searchparams.concept=$this.attr("data-tepuy-showconcept"),searchparams.courseid=courseid),$.get(M.cfg.wwwroot+"/mod/glossary/showentry_ajax.php",searchparams,(function(data){if(data.entries&&Object.keys(data.entries).length>0){var content="";Object.keys(data.entries).forEach((function(item){data.entries[item].definition&&(content=data.entries[item].definition)})),$this.find(".tepuy-body").html(content)}}),"json")}else if($this.attr("data-tepuy-innerentry"))$this.find("a.glossary.autolink").length>0&&($.get($this.find("a.glossary.autolink").attr("href").replace("showentry.php","showentry_ajax.php"),(function(data){data.entries&&data.entries.length>0&&$this.find(".tepuy-body").html(data.entries[0].definition)}),"json"),$this.attr("title",$this.find("a.glossary.autolink").attr("title")));else if($this.attr("data-tepuy-innerautolink")&&$this.find("a.autolink").length>0){var url=$this.find("a.autolink").attr("href")+"&inpopup=true";$this.find("a.autolink").hide();var $iframe=$("<iframe></iframe>");$iframe.attr("src",url),$iframe.on("load",(function(){$iframe.contents().find("a:not([target])").attr("target","_top")})),$this.find(".tepuy-body").append($iframe),$this.attr("title",$this.find("a.autolink").html())}$this.hide()}})),$(".tepuy-w-controller").on("click",(function(e){e.preventDefault();var $this=$(this);if(!($this.parents('[data-fieldtype="editor"]')&&$this.parents('[data-fieldtype="editor"]').length>0)){if(!(dialogue=$this.data("dialogue"))){var w=$this.attr("data-property-width"),h=$this.attr("data-property-height"),properties={center:!0,modal:!0,visible:!1,draggable:!1,width:"auto",height:"auto",autofillheight:"header",bodyContent:$($this.attr("data-content")+" .tepuy-body")};if(w){if(w.indexOf("%")>=0){var window_w=$(window).width(),tmp_w=Number(w.replace("%",""));!isNaN(tmp_w)&&tmp_w>0&&(w=tmp_w*window_w/100)}properties.width=w}if(h){if(h.indexOf("%")>=0){var window_h=$(window).height(),tmp_h=Number(h.replace("%",""));!isNaN(tmp_h)&&tmp_h>0&&(h=tmp_h*window_h/100)}properties.height=h}var dialogue=new M.core.dialogue(properties);$this.data("dialogue",dialogue)}dialogue.show()}})),$(".tepuy-openinmodal").each((function(){var $this=$(this);$this.parents('[data-fieldtype="editor"]')&&$this.parents('[data-fieldtype="editor"]').length>0||($this.find("a").each((function(){this.removeAttribute("onclick")})),$this.find("a").on("click",(function(event){event.preventDefault();var $link=$(this);if(!(dialogue=$link.data("dialogue"))){var w=$this.attr("data-property-width"),h=$this.attr("data-property-height"),url=$link.attr("href")+"&inpopup=true",$iframe=$('<iframe class="tepuy-openinmodal-container"></iframe>');$iframe.attr("src",url),$iframe.on("load",(function(){$iframe.contents().find("a:not([target])").attr("target","_top")}));var el=$.fn.hide;$.fn.hide=function(){return this.trigger("hide"),el.apply(this,arguments)};var $float_window=$("<div></div>");$float_window.append($iframe);var properties={center:!0,modal:!0,visible:!1,draggable:!0,width:"90vw",height:"90vh",autofillheight:"header",bodyContent:$float_window};if(w){if(w.indexOf("%")>=0){var window_w=$(window).width(),tmp_w=Number(w.replace("%",""));!isNaN(tmp_w)&&tmp_w>0&&(w=tmp_w*window_w/100)}properties.width=w}if(h){if(h.indexOf("%")>=0){var window_h=$(window).height(),tmp_h=Number(h.replace("%",""));!isNaN(tmp_h)&&tmp_h>0&&(h=tmp_h*window_h/100)}properties.height=h}var dialogue=new M.core.dialogue(properties);$link.data("dialogue",dialogue),dialogue.after("visibleChange",(function(e){"visible"===e.attrName&&e.prevVal&&!e.newVal&&$iframe.contents().find("video, audio").each((function(){this.pause()}))}),dialogue)}dialogue.show()})))})),$(".tepuy-mouse-over").on("mouseover",(function(){var $this=$(this);$($this.data("ref")).show(200,"swing")})),$(".tepuy-mouse-over").on("mouseout",(function(){var $this=$(this);$($this.data("ref")).hide(200,"swing")})),$("img[tepuy-over]").on("mouseover",(function(){var $this=$(this);$this.attr("original-src",$this.attr("src")),$this.attr("src",$this.attr("tepuy-over"))})),$("img[tepuy-over]").on("mouseout",(function(){var $this=$(this);$this.attr("src",$this.attr("original-src"))}))}}}));

//# sourceMappingURL=main.min.js.map